<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shipping Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="/styles/dashboard.css">
</head>
<body>
    <div class="container-fluid">
        
        <div class="row">
            <div class="col-md-3">
                <div class="list-group" id="car-list">
                    <!-- Car Items will be generated here -->
                </div>
                <!-- <button class="btn btn-primary mt-3">Add New Load</button> -->
            </div>
            <div class="col-md-9">
                <div class="row">
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-body">
                                
                                <div>
                                    <h6>Shipping ID:</h6>
                                   <img src="./assets/car.png" alt="shipping-icon" class="icon">
                                    <span id="shipping-id">#</span>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-body">
                               
                                <div>
                                    <h6>Driver:</h6>
                                    <img src="./assets/user-profile.png" alt="shipping-icon" class="icon">
                                    <!-- <button class="btn btn-link p-0"  data-bs-toggle="modal" data-bs-target="#assignModal">Assign Driver</button> -->
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-body">
                                
                                <div>
                                    <h6>Car Info:</h6>
                                    <img src="./assets/car-2.png" alt="shipping-icon" class="icon">
                                    <span id="truck-info">N/A</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-body">
                               
                                <div>
                                    <h6>Destination:</h6>
                                    <img src="./assets/car-3.png" alt="shipping-icon" class="icon">
                                    <span id="truck-destination">N/A</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <p>Map Overview </p>
                <div class="map-container mt-3" id="map-container">
                   
                    
                </div>
                <div class="modal fade" id="assignModal" tabindex="-1" aria-labelledby="assignModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="assignModalLabel">Assign a Delivery Personnel</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <p>Assign the delivery personnel to ensure timely and safe deliveries. Below are the details of the car and the assignment options.</p>
                                <form>
                                    <div class="mb-3">
                                        <label for="carType" class="form-label">Car Type</label>
                                        <input type="text" class="form-control" id="carType" readonly>
                                    </div>
                                    <div class="mb-3">
                                        <label for="carID" class="form-label">Car ID</label>
                                        <input type="text" class="form-control" id="carID" value="E138712" readonly>
                                    </div>
                                    <div class="mb-3">
                                        <label for="personnel" class="form-label">Assign Personnel</label>
                                        <select class="form-select" id="personnel">
                                            <option value="John Doe">John Doe</option>
                                            <option value="Emily Davis">Emily Davis</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="destination" class="form-label">Destination</label>
                                        <select class="form-select" id="destination">
                                            <option value="Nairobi">Nairobi</option>
                                            <option value="Kisumu">Kisumu</option>
                                            <option value="Kitui">Kitui</option>
                                            <option value="Eldoret">Eldoret</option>
                                        </select>
                                    </div>
                                </form>
                                <div class="alert alert-info mt-3" role="alert">
                                    Make sure to assign the delivery personnel carefully to ensure smooth operations.
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-primary">Assign</button>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
    <script>
       
        // Example data
const cars = [
    { id: 'E138712', driver: 'Not Assigned', info: 'Mazda CX-3', type: 'Pending', status: 'pending', imgSrc: './assets/mazda.png', destination: "Nairobi" },
    { id: 'E138713', driver: 'Not Assigned', info: 'Golf-R', type: 'Pending', status: 'pending', imgSrc: './assets/golf-r.png', destination: "Kisumu" },
    { id: 'E138714', driver: 'Jane Smith', info: 'Prado TX', type: 'In Transit', status: 'in-transit', imgSrc: './assets/tx.png', destination: "Eldoret" },
    { id: 'E138715', driver: 'Alex Johnson', info: 'Audi RS6', type: 'In Delivery', status: 'in-delivery', imgSrc: './assets/rs6.png', destination: "Kitui" }
];

function generateCarList() {
    const carList = document.getElementById('car-list');
    cars.forEach(car => {
        const listItem = document.createElement('a');
        listItem.href = '#';
        listItem.className = 'list-group-item list-group-item-action d-flex align-items-center';
        listItem.dataset.carId = car.id;
        listItem.innerHTML = `
            <img src="${car.imgSrc}" alt="${car.info}" class="car-icon">
            <div>
                <h6>${car.id}</h6>
                <p>${car.info}</p>
            </div>
            <span class="badge ${car.status === 'in-delivery' ? 'status-in-delivery' : car.status === 'in-transit' ? 'status-in-transit' : 'status-pending'}">${car.type}</span>
        `;
        listItem.addEventListener('click', () => loadCarDetails(car));
        carList.appendChild(listItem);
    });
}

function loadCarDetails(car) {
    document.getElementById('shipping-id').textContent = car.id;
    const driverDiv = document.querySelectorAll('.card-body')[1];
    driverDiv.innerHTML = ''; // Clear the existing content
    
    // Append the new content
    driverDiv.innerHTML = `
        <div>
            <h6>Driver:</h6>
            <img src="./assets/user-profile.png" alt="shipping-icon" class="icon">
        </div>
        <button class="btn btn-link p-0 assign-button" data-bs-toggle="modal" data-bs-target="#assignModal">Assign Driver</button>
    `;
    
    document.getElementById('truck-info').textContent = car.info;
    document.getElementById('truck-destination').textContent = car.destination;

    // Update the car type input field in the modal
    document.getElementById('carType').value = car.info;
    document.getElementById('carID').value = car.id;
}

document.addEventListener('DOMContentLoaded', () => {
    generateCarList();
    if (cars.length > 0) {
        loadCarDetails(cars[0]); // Load the details of the first car
    }
});
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
